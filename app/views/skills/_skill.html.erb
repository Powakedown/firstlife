<% if skill.level %>
  I'm a level <%= skill.name %>
<% else %>
  <div class="skill-component">
    <div class="skill-name">
      <h4 class="tree-type"><%= skill.action %></h4>
      <h4 class="tree-title"><%= skill.name %></h4>
    </div>

    <% if @tree_user %>  <!-- si on a le tree -->
      <div class="skill-badge tree-opened">
        <div class="badge-content-titre">
          <div class="skill-badge skill-count" style="background-color: <%= @tree.color %>">
            <%= current_user.skills.where(tree: @tree).count %>
          </div>
        </div>
        <!-- Action de cocher les skills si le Tree est possédé par le current user -->
        <% if current_user.user_skills.where(skill: skill).exists? %> <!-- si on a le skill -->
          <%= link_to user_skill_path(current_user.user_skills.where(skill: skill).first), method: :delete, remote: true, class: "badge-content"  do %>
            <div class="badge-content" %>
              <i class="fa fa-check checked"></i> <!-- on affiche la coche verte -->
            </div>
          <% end %>
        <% else %>
          <%= link_to skill_user_skills_path(skill), method: :post, remote: true, class: "badge-content"  do %>
            <i class="fa fa-check unchecked"></i> <!-- on affiche la coche gris -->
          <% end %>
        <% end %>
      </div>

    <% else %>
      <div class="skill-badge tree-closed">
        <%= link_to tree_user_trees_path(@tree), method: :post, class: "badge-content-titre" do %>
          <a href="#"><i class="fa fa-check unchecked"></i></a> <!-- on affiche la coche gris -->
        <% end %>
      </div>
    <% end %>
  </div>
<% end %>
